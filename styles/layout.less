@import "global.less";
@import "page_interfaces.less";

/* ------------------------------------------------------------------------ */
/* mixins with color */

.solid-border(@color: black) {
    border: thin solid @color;
}

.solid-border-bottom(@color: black) {
    border-bottom: thin solid @color;
}

/* standalone classes that can be used as mixins, but that should not
 * be given parameters, as they can't be used as classes in the code
 * directly if they have parameters that the lessc compiler has to 
 * sort out
 */

.default-border {
    .solid-border;
}

.default-border-bottom {
    .solid-border-bottom;
}

.sidebar-color {
    background-color: @sidebar-background;
}

.sans-serif {
    font-family: @sans-serif-font;
}

.button {
    .sans-serif;
}

/* ------------------------------------------------------------------------ */
/* Global */

* {
    box-sizing: border-box;
}

body {
    margin: 0;
    background-color: @page-background;
    color: @page-text;
    a:link {
        color: @link-color;
    }
    a:visited {
        color: @visited-color;
    }
    a:active {
        color: @active-color;
    }
}

img {
    border: 0;
}

table {
    border-collapse: collapse;
    th {
        .bold;
    }
    th.label {
        .left-align;
    }
    td, th {
        padding: 0.1em 0.2em;
    }
}

/* ------------------------------------------------------------------------ */
/* HTML5 hacks */

section, footer, aside, main, article, figure {
    display: block;
}

/* ------------------------------------------------------------------------ */
/* Headings */

h1, h2, h3, h4, h5, h6 {
    color: @heading-color;
    .sans-serif;
}

/* ------------------------------------------------------------------------ */
/* Header */

header, #header {
    .full-width;
    height: 5em;
    padding: 0;
    border: 0;
    display: table;
    background-color: @header-background;
    color: @header-text;
    #logo, #titles-preserved {
        display: table-cell;
    }
    #logo {
        padding: 0.5em 0.5em 0.1em;
    }
    #titles-preserved {
        .center-align;
        .middle-align;
        font-size: 0.9em;
        #x-preserved {
            .bold;
            .sans-serif;
        }
    }
}

/* ------------------------------------------------------------------------ */
/* Navbar */

nav, #navbar-outer {
    .full-width;
    display: table;
}

#navbar {
    height: 2.2em;
    margin: 0;
    border: 0;
    font-size: 0.75em;
    display: table-row;
    background-color: @navbar-background;
    .sans-serif;
    .unicolor-link(@navbar-text);
    span.currentpage {
        .bold;
    }
    label, span.text, span.currentpage {
        color: @navbar-text;
    }
    #navbar-left {
        float: left;
        padding: 3px;
        margin: 2px;
        display: table-cell;
    }
    #navbar-right, #navbar-login {
        .right-align;
        float: right;
        display: table-cell;
    }
    #navbar-right {
        margin: 2px;
        padding: 3px;
    }
    #navbar-login {
        margin: 3px;
    }
    form {
        margin: 0;
        display: inline;
        input {
           .sans-serif;
            font-size: 11px;
        }
        div {
            display: inline;
        }
    }
}

/* ------------------------------------------------------------------------ */
/* Alert & Test bar */

#alertbar-outer, #testbar-outer {
    #navbar-outer;
}

#alertbar, #testbar {
    #navbar;
    p {
        .bold;
        .center-align;
        .middle-align;
        display: table-cell;
    }
}

#alertbar, #alertbar-outer {
    .sans-serif;
    background-color: fade(yellow, 40%);
    color: black;
    .unicolor-link(darken(gray, 20%));
}

#testbar, #testbar-outer {
    .sans-serif;
    background-color: @page-background;
    background: repeating-linear-gradient(
        to right,
        yellow,
        @page-background 24%,
        @page-background 75%,
        yellow 100%,
    );
    color: black;
    .solid-border-bottom;
    .unicolor-link(lighten(black, 30%));
}

/* ------------------------------------------------------------------------ */
/* Statsbar */

#sidebar, #statsbar {
    background-color: @sidebar-background;
    color: @sidebar-text;
    p, li, td, th {
        .sans-serif;
    }
}

/* ------------------------------------------------------------------------ */
/* Footer */

footer, #footer {
    .full-width;
    height: 2em;
    .really-small;
    .center-align;
    .middle-align;
    background-color: @footer-background;
    color: @footer-text;
    .sans-serif;
    .unicolor-link(@footer-text);
    p {
        margin: 0px;
        padding: 0.3em;
    }
    small {
        .really-small;
    }
}

/* ------------------------------------------------------------------------ */
/* Content layout */

#page-container {
    .no-border;
    .full-width;
    display: table;
    background-color: @sidebar-background;
}

#page-body-container {
    display: table-row;
}

#content-container {
    .left-align;
    .top-align;
    .full-width;
    padding: 0 0.5em 1em 0.5em;
    display: table-cell;
    background-color: @page-background;
    color: @page-text;
}

#rounded-corner {
    background-color: @page-background;
}

.quick-links {
    padding: 0;
    li {
        display: inline;
        &::before {
            content: " | ";
        }

        &:first-child::before {
            content: "";
        }
    }
}

/*
 If the screen is "narrow enough" we move the statsbar below the page
 content using a flex layout. We don't use a flex layout for the
 regular content because doing so cuts off the project listings on
 the round pages. Until we are able to make full use of the window
 for the round pages (death to the statsbar??) we need to keep a
 table-style layout to force the statsbar off the screen when the
 window gets too narrow
*/
@media only screen and (max-width: 768px) {
    #header {
        #month-preserved-summary {
            display: none;
        }
        p {
            margin: 0.25em 0.5em;
        }
    }
    #page-body-container {
        display: flex;
        display: -ms-flexbox; /* for IE 11 */
        flex-direction: column;
    }

    #page-container, #content-container {
        display: block;
    }
}

/* For even smaller screens, change the header and footer */
@media only screen and (max-width: 481px) {
    #header {
        #titles-preserved {
            display: table-row;
            .right-align;
            font-size: 0.8em;
        }
        #logo {
            img {
                max-width: 100%;
            }
        }
    }

    #buildtime {
        display: none;
    }
}

/* ------------------------------------------------------------------------ */
/* Section dividers */

hr.divider {
    .center-align;
    width: 75%;
}

/* ------------------------------------------------------------------------ */
/* Star texts */

.star-text-summary {
    width: 33%;
    float: left;
    p {
        padding-right: 0.5em;
    }
    .star-header {
        .center-align;
    }
}

.star-metal(@color) {
    font-size: 3em;
    color: @color;
    text-align: center;
    text-shadow: 3px 2px 5px black;
}

.star-gold {
    .star-metal(#FFD700);
}

.star-silver {
    .star-metal(silver);
}

.star-bronze {
    .star-metal(#cd7f32);
}


@media only screen and (max-width: 481px) {
    .star-text-summary {
        width: 100%;
        padding-bottom: 1em;
    }
    .star-header, .star-description {
        display: table-cell;
    }
    .star-header {
        width: 10em;
        padding-right: 1em;
    }
}

/* ------------------------------------------------------------------------ */
/* News items */

div.news {
    margin: 1em 0;
}
div.newsupdated {
    // margin-top is a _horrible_ hack to force this lower and closer
    // to the baseline of newsheader
    margin-top: 0.7em;
    float: right;
}
div.newsitem {
    border-radius: 5px;
    padding: 0.75em;
    margin-left: 0.5em;
    margin-top: 1em;
    overflow: auto;
    box-shadow: -5px -5px 5px lightgrey;
    p {
        margin: 0 0.5em 0.5em 0;
    }
    img {
        max-width: 100%;
    }
}

.news-header {
    font-size: 1.5em;
    font-weight: bold;
    padding-bottom: 0.5em;
}

.news-format(@color: black) {
    color: @color;
}

.news-normal {
    .news-format();
}

.news-announcement1 {
    .news-format(maroon);
}

.news-announcement2 {
    .news-format(orange);
}

.news-announcement3 {
    .news-format(darkblue);
}

.news-celebration {
    .news-format(green);
}

.news-maintenance {
    .news-format(red);
}

/* ------------------------------------------------------------------------ */
/* Editing news items */

table.newsedit {
    width: 100%;
    border-collapse: collapse;
        tr td {
            .top-align;
    }
    tbody.padding tr td.commands,
    tbody.padding tr td.items {
        padding-bottom: 1em;
        padding-top: 0.5em;
    }
    td.commands {
        width: 10%;
        padding-right: 2em;
        padding-left: 1em;
        white-space: nowrap;
    }
    td.items {
        width: 90%;
    }
}

/* ------------------------------------------------------------------------ */
/* Attention-getting structures */

div.callout {
    .solid-border;
    background-color: #EEE;
    margin-right: 2em;
    margin-left: 2em;
    padding: 1em;
    p {
        margin-bottom: 0;
    }
}

div.calloutheader {
    .bold;
}

.error, .warning {
    .bold;
}

.error, .test_warning {
    color: red;
}

.warning {
    color: blue;
}

.highlight {
    background-color: yellow;
    color: black;
}

kbd {
    font-family: DejaVu Sans Mono, monospace;
    color: #cc0000;
}

/* ------------------------------------------------------------------------ */
/* Round and Pool filter table */

#filter_form {
    padding: 0 0.5em 0.5em 0.5em;
}

table.filter {
    width: 100%;
    td {
        padding: .25em 0.25em 0em .25em;
        .top-align;
        white-space: nowrap;
        select {
            margin: .1em auto;
            width: 100%;
        }
    }
}

/* ------------------------------------------------------------------------ */
/* Registration table */

table.register {
    width: auto;
    border-collapse: separate;
    .solid-border;
    th, td {
        padding: 3px;
    }
    th {
        .right-align;
        .bold;
        background-color: @header-background;
    }
    td {
        .left-align;
        input[type=text],
        input[type=password],
        input[type=select] {
            width: 98%;
        }
    }
    td.bar {
        .center-align;
        background-color: @navbar-background;
    }
}

/* ------------------------------------------------------------------------ */
/* Site Progress Snapshot table on Activity Hub */

table.snapshottable {
    margin: 0;
    padding: 0;
    border-collapse: collapse;
    td, th {
        padding: 2px;
        margin: 0;
        .center-align;
        .solid-border;
    }
    th {
        font-weight: normal;
        background-color: @header-background;
    }
    th.activity-icon-header {
        border: none;
        background-color: @page-background;
    }
    td.stage-column {
        .left-align;
        .middle-align;
        padding: 5px;
    }
    td.nocell {
        border: none;
    }
}

.stage-access(@color: black) {
    padding-left: 5px;
    float: right;
    display: inline-block;
    min-width: 1.5em;
    .middle-align;
    .center-align;
    font-size: 1.1em;
    font-weight: bold;
    color: @color;
    a:link,
    a:visited,
    a:active {
        color: @color;
        text-decoration: none;
    }
}

.access-yes {
    .stage-access(green);
}

.access-no {
    .stage-access(red);
}

.access-eligible {
    .stage-access(blue);
}


@media only screen and (max-width: 768px) {
    .stage-name,
    .stage-access,
    .pages-goal,
    .pages-completed {
        display: none;
    }
}

/* ------------------------------------------------------------------------ */
/* Progress bar */

div.progressbar {
    font-size: 0.5em;
    float: left;
    .solid-border;
}

/* ------------------------------------------------------------------------ */
/* Statistics table */

table.stats {
    /* so that right aligned and left aligned columns don't clash */
    td, th {
        padding-right: 2em;
    }
}

/* ------------------------------------------------------------------------ */
/* Translation table */

table.translation {
    td, th {
        padding-right: 1em;
    }
}

/* ------------------------------------------------------------------------ */
/* Available Project Listings */

table.availprojectlisting {
    width: 100%;
    border-collapse: collapse;
    .solid-border;
    tr {
        td, th {
            padding-left: 0.5em;
            padding-right: 0.5em;
        }
        th {
            .bold;
            .left-align;
            .solid-border-bottom;
            img {
                border: 0;
            }
        }
        td {
            .solid-border-bottom(#888);
        }
    }
    tr:nth-child(even) {
        background-color: #ddd;
    }
}

/* Default stage colors, which can be overridden by the themes */
@P1-even: #ffe4b5;
@P1-odd: cornsilk;
@P2-even: #ffe4b5;
@P2-odd: cornsilk;
@P3-even: plum;
@P3-odd: thistle;
@F1-even: #ffe4b5;
@F1-odd: cornsilk;
@F2-even: plum;
@F2-odd: thistle;
@PP-even: #cccccc;
@PP-odd: #ffffff;
@PPV-even: #99ffff;
@PPV-odd: #eaf7f7;
@SR-even: #ccffcc;
@SR-odd: #ccff99;

@stages: P1 P2 P3 F1 F2 PP PPV SR;

each(@stages, {
    @even-color: "@{value}-even";
    @odd-color: "@{value}-odd";
    table.stage_@{value} {
        tr:nth-child(even) {
            background-color: @@even-color;
        }
        tr:nth-child(odd) {
            background-color: @@odd-color;
        }
    }
})

/* ------------------------------------------------------------------------ */
/* FAQ */

table.faqtable {
    width: 100%;
    border: 0;
    padding: 1em;
    tr {
        td.column {
            .top-align;
            width: 50%;
            padding-right: 1em;
        }
    }
}

div.faqheader {
    .bold;
    .middle-align;
    padding: 0.25em 0.5em;
    .sans-serif;
    background-color: @navbar-background;
    color: @navbar-text;
}

/* ------------------------------------------------------------------------ */
/* User Preferences */

/*
This stylesheet originated from http://www.alistapart.com/articles/slidingdoors/
Quote http://www.alistapart.com/copyright/:
*/
/*
 *  A List Apart gives away CSS styles, JavaScript, PHP and Perl scripts,
 *  XHTML markup techniques, and other bits of "source code" for the use
 *  of its readers. You may freely copy, paste, and modify any of this
 *  code for use on your own web projects large or small, commercial or
 *  non-commercial. You need not ask permission to do so. You need not
 *  credit ALA or its authors. It is our gift to you.
 *
 *  ...
 *
 *  Images, including those used in tutorials (example), cannot be
 *  reproduced outside this magazine, except by the author or designer
 *  who created them.
 *
 *  You may adapt elements of our CSS in your own projects, but the
 *  unique combination of images, colors, sizes, typography, and
 *  positioning ("the design") is copyright 2003 A List Apart Magazine
 *  and Happy Cog Studios and may not be reproduced.
 */

table.preferences {
    border-collapse: collapse;
    td, th {
        .solid-border;
    }
    th.longlabel {
        .center-align;
    }
    th.label, th.longlabel {
        background-color: @header-background;
        color: @header-text;
    }
}

.tabs {
    float: left;
    width: 90%;
    .solid-border-bottom(grey);
    ul {
        margin: 0;
        padding: 0 20px 0 10px;
        list-style: none;
    }
    li {
        float: left;
        margin: 0;
        padding: 0 0 0 4px;
        border-radius: 5px 5px 0 0;
        margin-bottom: -2px;
        background-color: desaturate(@header-background, 50%);
        .solid-border(grey);
        a {
            color: desaturate(@header-text, 50%);
        }
    }
    a {
        float: left;
        display: block;
        padding: 5px 15px 4px 6px;
        text-decoration: none;
        min-width: 8em;
    }
    .current-tab {
        border-bottom: none;
        background-color: @page-background;
        .solid-border(grey);
        a {
            .bold;
            color: @page-text;
        }
    }
}

/* ------------------------------------------------------------------------ */
/* Themed tables */

table.themed {
    width: 100%;
    border-collapse: collapse;
    .solid-border;
    tr {
        background-color: @header-background;
        color: @header-text;
        th, td {
            padding: 0.1em;
        }
        th {
            background-color: @navbar-background;
            color: @navbar-text;
            a:link, a:visited {
                color: @navbar-text;
            }
        }
    }
}

table.theme_striped {
    tr {
        th, td {
            padding: 0.1em 0.5em 0.1em 0.5em;
        }
    }
    tr:nth-child(even) {
        background-color: @sidebar-background;
    }
    tr:nth-child(odd) {
        background-color: @page-background;
    }
}

table.basic {
    border-collapse: collapse;
    .solid-border;
    th {
        background-color: #CCC;
    }
    td, th {
        .solid-border;
    }
    th.label {
        .left-align;
    }
    td.satisfied {
        .right-align;
        background-color: #ccffcc;
    }
    td.not_satisfied {
        .right-align;
        background-color: #ffcccc;
    }
    textarea {
        width: 100%;
    }
}

table.striped {
    tr:nth-child(even) {
        td {
            background-color: #ddd;
        }
    }
}

table.no-border {
    td, th {
        border: none;
    }
}

/* ------------------------------------------------------------------------ */
/* PPV Report */

p.inline_input {
    .no-margin;
    .no-padding;
}
p.hanging_indent {
    text-indent: -1.25em;
    margin-left: 1.25em;
}
p.hanging_indent_long {
    text-indent: -3em;
    margin-left: 3em;
}
p.form_problem {
    margin-bottom: 0;
    color: red;
    font-weight: bold;
}
p.form_problem:before {
    content: '\\002193 '; /* down-arrow */
}
table.ppv_reportcard {
    width: 95%;
    .solid-border;
    th {
        .center-align;
        .bold;
        .solid-border;
    }
    th.major_section {
        background-color: @header-background;
    }
    th.minor_section {
        background-color: #99ff99;
    }
    th.heading {
        background-color: #e0e8dd;
    }
    td {
        .solid-border;
    }
}

/* ------------------------------------------------------------------------ */
/* Image Sources */

table.image_source {
    border-collapse: collapse;
    width: 90%;
    margin: auto;
    tr.e {
        background-color: #eee;
    }
    tr.o {
        background-color: #ddd;
    }
    th {
        .center-align;
        padding: 5px;
        background-color: #eee;
        .solid-border(#999);
    }
    td {
        padding: 5px;
        .solid-border(#999);
        a.sourcelink {
            font-size: 90%;
            margin: 10px 0px 3px 25px;
        }
    }
    th.label {
        .left-align;
    }
    td.enabled {
        .center-align;
        background-color: #9f9;
    }
    td.disabled {
        .center-align;
        background-color: #ddd;
    }
    td.pending {
        .center-align;
        background-color: #ff8;
    }
}

div.perms_wrapper {
    width: 40%;
    display: inline-block;
    padding: 2px;
    border-bottom: dotted black 1px;
}

/* ------------------------------------------------------------------------ */
/* Page Detail */

table.pagedetail {
    width: auto;
    th, td {
        .center-align;
        font-weight: normal;
        .solid-border;
    }
}

.in_progress {
    background-color: #FC6;
}
.done_current {
    background-color: #9F6;
}
.done_previous {
    background-color: #F36;
}

/* ------------------------------------------------------------------------ */
/* Remote File Manager */

table.dirlist {
    width: 100%;
    .actions {
        text-align: center!important;
    }
    caption {
        .left-align;
        font-size: 111%;
        margin-top: 0.5em;
        padding: 5px;
    }
}

/* ------------------------------------------------------------------------ */
/* Quizzes */

@quiz-passed: #ccffcc;
@quiz-not-passed: #ffcccc;
@quiz-date-ok: #ccffcc;
@quiz-date-not-ok: #ffcccc;
@quiz-all-ok: #88ff88;
@quiz-all-not-ok: #ff8888;

.quiz-passed {
    background-color: @quiz-passed;
}

.quiz-not-passed {
    background-color: @quiz-not-passed;
}

.quiz-date-ok {
    background-color: @quiz-date-ok;
}

.quiz-date-not-ok {
    background-color: @quiz-date-not-ok;
}

.quiz-ok {
    background-color: @quiz-all-ok;
}

.quiz-not-ok {
    background-color: @quiz-all-not-ok;
}

/* ------------------------------------------------------------------------ */
/* Special days tables */

table.list_special_days {
    width: 90%; margin: auto;
    tr.e {
        background-color: #eee;
    }
    tr.o {
        background-color: #ddd;
    }
    tr.month > * {
        border: none;
        border-bottom: solid 2px black;
    }
    td, th {
        padding: 3px;
        .solid-border(#999);
    }
    td.codecell {
        vertical-align:middle;
        text-align:center;
    }
    th.headers {
        padding:0.5em;
    }
    td.enabled {
        text-align: center;
        background-color: #9f9;
    }
    td.disabled {
        text-align: center;
        background-color: #ddd;
    }
    td.center {
        text-align: center;
    }
    td.right, th.right {
        text-align: right; font-weight: normal;
    }
    h2 {
        margin: 1em auto auto auto; text-align: left;
    }
}

table.show_special_days {
    th {
        background-color: #eeeeee;
    }
}

table.edit_special_day {
    width: 90%;
    margin: auto;
    th, td {
        padding: 5px;
        .solid-border;
        background-color: #eeeeee;
    }
}

/* ------------------------------------------------------------------------ */
/* Search Form */

/* Container to wrap the search columns */
div.search-columns {
    width: 99%;
    overflow: auto;
    .center-align;
    clear: both;
}

/* This sets everything into one column... */
table.search-column {
    width: 99%;
    /* Set the size of the row label to be consistent */
    tr th {
        width: 8em;
    }
}

/* ... and this says if the screen is >800px, make it two columns. */
@media only screen and (min-width: 800px) {
    table.search-column {
        width: 50%;
        float: left;
        tr th {
            width: auto;
        }
    }
}

/* ------------------------------------------------------------------------ */
/* Search Results drop-down */

.dropdown {
    position: relative;
    display: inline;
}

.dropdown-content {
    display: none;
    position: absolute;
    top: 1.5em;
    right: 0;
    padding: 0.3em;
    margin: 0 0 0 -15em;
    z-index: 1;
    background-color: #f9f9f9;
    box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.5);
    border-radius: 0.3em;
}

/* button looking like a link */
.dropdown-button {
    border: none;
    padding: 1px;
    background-color: transparent;
    cursor: pointer;
    font-family: initial;
    font-size: initial;
    text-decoration: underline;
}

.dropdown-show {
    display:block;
}

/* ------------------------------------------------------------------------ */
/* Link box */

#linkbox{
    .plain-list;
    .left-align;
    .top-align;
    padding: 0 1em;
    float:right;
    margin: 0.5em auto 0.5em 0.5em;
    .solid-border;
    .sidebar-color;
    h2 {
        .center-align;
        font-size: 1em;
    }
    li {
        margin-top: 3px;
    }
}

/* ------------------------------------------------------------------------ */
/* Page compare grid */

.grid-wrapper {
    display: grid;
    grid-template-columns: max-content max-content;
    grid-column-gap: 2em;
    grid-row-gap: 2px;
}

/* ------------------------------------------------------------------------ */
/* Project Page */

li.spaced {
    margin: 1em 0;
}

.thin-heading {
    margin-bottom: 0.2em;
}

.thin-para {
    margin-top: 0.2em;
    margin-bottom: 0.2em;
}

.list-head {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
}

/* ------------------------------------------------------------------------ */
/* CharSuite Explorer */

.gs-char {
    font-size: 1.5em;
}

.gs-codepoint {
    font-size: 0.7em;
}

/* ------------------------------------------------------------------------ */
/* replace text validator */

.replace_check {
    height: 20em;
    width: 50em;
    .solid-border;
}
